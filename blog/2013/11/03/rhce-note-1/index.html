
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>RHCE note 1 - 郭润民的博客</title>
  <meta name="author" content="Grunmin">

  
  <meta name="description" content="unit 1 查看系统版本
cat /etc/redhat-release
查看网络参数
ifconfig
查看主机名
hostname
查看shell
cat /etc/shells
查看当前用户名称
whoami
查看当前位置
pwd
修改用户密码
passwd username &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://grunmin.github.io/blog/2013/11/03/rhce-note-1">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="郭润民的博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42775487-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">郭润民的博客</a></h1>
  
    <h2>Learn for Learning</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:grunmin.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">归档</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">RHCE Note 1</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-03T02:07:00+08:00" pubdate data-updated="true">Nov 3<span>rd</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><!-- more -->


<h2>unit 1</h2>

<ul>
<li><p>查看系统版本<br/>
cat /etc/redhat-release</p></li>
<li><p>查看网络参数<br/>
ifconfig</p></li>
<li><p>查看主机名<br/>
hostname</p></li>
<li><p>查看shell<br/>
cat /etc/shells</p></li>
<li><p>查看当前用户名称<br/>
whoami</p></li>
<li><p>查看当前位置<br/>
pwd</p></li>
<li><p>修改用户密码<br/>
passwd username</p></li>
<li><p>查看当前用户id<br/>
id</p></li>
<li><p>切换用户<br/>
su &ndash; username</p></li>
<li><p>查看历史命令并执行<br/>
history<br/>
!number<br/>
或者!加命令前面几个字母<br/>
实例：</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@instructor 920]# !ca
</span><span class='line'>cat /etc/shells 
</span><span class='line'>/bin/sh
</span><span class='line'>/bin/bash
</span><span class='line'>/sbin/nologin
</span><span class='line'>/bin/tcsh
</span><span class='line'>/bin/csh</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>快捷输入前一个参数<br/>
Alt+.</p></li>
<li><p>查看后台任务，更改到前台运行，更改到后台运行<br/>
jobs，fg number，bg number<br/>
实例：</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@instructor 920]# jobs
</span><span class='line'>[1]-  Running                 gedit day1.txt &
</span><span class='line'>[2]+  Stopped                 firefox
</span><span class='line'>[root@instructor 920]# 
</span><span class='line'>[root@instructor 920]# 
</span><span class='line'>[root@instructor 920]# fg 2
</span><span class='line'>firefox</span></code></pre></td></tr></table></div></figure>


<ul>
<li>暂停当前任务并移到后台，停止当前命令：<br/>
Ctrl+z，Ctrl+c</li>
</ul>


<h2>unit 6</h2>

<h3>创建文件系统</h3>

<ul>
<li> mbr区域有512B大小，其中16*4的大小用来记录四个主分区</li>
<li>主分区，扩展分区和逻辑分区总数不能超过15</li>
<li>查看磁盘信息<br/>
实例：</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@instructor 920]# fdisk -l /dev/sda
</span><span class='line'>Disk /dev/sda: 320.1 GB, 320072933376 bytes
</span><span class='line'>255 heads, 63 sectors/track, 38913 cylinders
</span><span class='line'>Units = cylinders of 16065 * 512 = 8225280 bytes
</span><span class='line'>Sector size (logical/physical): 512 bytes / 512 bytes
</span><span class='line'>I/O size (minimum/optimal): 512 bytes / 512 bytes
</span><span class='line'>Disk identifier: 0x0007213a
</span><span class='line'>
</span><span class='line'>   Device Boot      Start         End      Blocks   Id  System
</span><span class='line'>/dev/sda1   *           1          17      131072   83  Linux
</span><span class='line'>Partition 1 does not end on cylinder boundary.
</span><span class='line'>/dev/sda2              17        4096    32768000   8e  Linux LVM
</span><span class='line'>/dev/sda3            4096        6646    20480000   8e  Linux LVM
</span><span class='line'>/dev/sda4            6646       38914   259190784    5  Extended
</span><span class='line'>/dev/sda5            6646        7952    10485760   83  Linux
</span><span class='line'>/dev/sda6            7952        8605     5251727   83  Linux
</span><span class='line'>/dev/sda7            8606        8657      417658+  8e  Linux LVM
</span><span class='line'>/dev/sda8            8658        8785     1028128+  8e  Linux LVM
</span><span class='line'>/dev/sda9            8786        8888      827316   8e  Linux LVM
</span><span class='line'>/dev/sda10           8889       16722    62926573+  8e  Linux LVM
</span><span class='line'>/dev/sda11          16723       18812    16787893+  8e  Linux LVM</span></code></pre></td></tr></table></div></figure>


<ul>
<li>基本流程：<br/>
fdisk 分区 &mdash;>  mkfs  格式化 &mdash;> mount 挂载<br/>
1、分区<br/>
实例：</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>fdisk /dev/vda
</span><span class='line'>Command (m for help): m
</span><span class='line'>Command action
</span><span class='line'>   a   toggle a bootable flag
</span><span class='line'>   b   edit bsd disklabel
</span><span class='line'>   c   toggle the dos compatibility flag
</span><span class='line'>   d   delete a partition
</span><span class='line'>   l   list known partition types
</span><span class='line'>   m   print this menu
</span><span class='line'>   n   add a new partition
</span><span class='line'>   o   create a new empty DOS partition table
</span><span class='line'>   p   print the partition table
</span><span class='line'>   q   quit without saving changes
</span><span class='line'>   s   create a new empty Sun disklabel
</span><span class='line'>   t   change a partition's system id
</span><span class='line'>   u   change display/entry units
</span><span class='line'>   v   verify the partition table
</span><span class='line'>   w   write table to disk and exit
</span><span class='line'>   x   extra functionality (experts only)
</span><span class='line'>Command (m for help): n
</span><span class='line'>Command action
</span><span class='line'>   e   extended
</span><span class='line'>   p   primary partition (1-4)
</span><span class='line'>e
</span><span class='line'>Partition number (1-4): 3
</span><span class='line'>First cylinder (1-27046, default 1): 21328
</span><span class='line'>Last cylinder, +cylinders or +size{K,M,G} (21328-27046, default 27046): 
</span><span class='line'>Using default value 27046
</span><span class='line'>Command (m for help): p
</span><span class='line'>Disk /dev/vda: 14.0 GB, 13958643712 bytes
</span><span class='line'>16 heads, 63 sectors/track, 27046 cylinders
</span><span class='line'>Units = cylinders of 1008 * 512 = 516096 bytes
</span><span class='line'>Sector size (logical/physical): 512 bytes / 512 bytes
</span><span class='line'>I/O size (minimum/optimal): 512 bytes / 512 bytes
</span><span class='line'>Disk identifier: 0x00064009
</span><span class='line'>   Device Boot      Start         End      Blocks   Id  System
</span><span class='line'>/dev/vda1   *           3         523      262144   83  Linux
</span><span class='line'>Partition 1 does not end on cylinder boundary.
</span><span class='line'>/dev/vda2             523       21328    10485760   8e  Linux LVM
</span><span class='line'>Partition 2 does not end on cylinder boundary.
</span><span class='line'>/dev/vda3           21328       27046     2882256    5  Extended
</span><span class='line'>Command (m for help): n
</span><span class='line'>Command action
</span><span class='line'>   l   logical (5 or over)
</span><span class='line'>   p   primary partition (1-4)
</span><span class='line'>l
</span><span class='line'>First cylinder (21328-27046, default 21328): 
</span><span class='line'>Using default value 21328
</span><span class='line'>Last cylinder, +cylinders or +size{K,M,G} (21328-27046, default 27046): +100M
</span><span class='line'>Command (m for help): p
</span><span class='line'>Disk /dev/vda: 14.0 GB, 13958643712 bytes
</span><span class='line'>16 heads, 63 sectors/track, 27046 cylinders
</span><span class='line'>Units = cylinders of 1008 * 512 = 516096 bytes
</span><span class='line'>Sector size (logical/physical): 512 bytes / 512 bytes
</span><span class='line'>I/O size (minimum/optimal): 512 bytes / 512 bytes
</span><span class='line'>Disk identifier: 0x00064009
</span><span class='line'>   Device Boot      Start         End      Blocks   Id  System
</span><span class='line'>/dev/vda1   *           3         523      262144   83  Linux
</span><span class='line'>Partition 1 does not end on cylinder boundary.
</span><span class='line'>/dev/vda2             523       21328    10485760   8e  Linux LVM
</span><span class='line'>Partition 2 does not end on cylinder boundary.
</span><span class='line'>/dev/vda3           21328       27046     2882256    5  Extended
</span><span class='line'>/dev/vda5           21328       21531      102664+  83  Linux
</span><span class='line'>Command (m for help): w
</span><span class='line'>The partition table has been altered!
</span><span class='line'>Calling ioctl() to re-read partition table.
</span><span class='line'>WARNING: Re-reading the partition table failed with error 16: Device or resource busy.
</span><span class='line'>The kernel still uses the old table. The new table will be used at
</span><span class='line'>the next reboot or after you run partprobe(8) or kpartx(8)
</span><span class='line'>Syncing disks.
</span><span class='line'>[root@demo ~]# partx -a /dev/vda
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 1
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 2
</span><span class='line'>[root@demo ~]# 
</span><span class='line'>[root@demo ~]# partx -a /dev/vda
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 1
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 2
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 3
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 5</span></code></pre></td></tr></table></div></figure>


<p>  2、格式化<br/>
实例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# mkfs -t ext4 /dev/vda5
</span><span class='line'>mke2fs 1.41.12 (17-May-2010)
</span><span class='line'>Filesystem label=
</span><span class='line'>OS type: Linux
</span><span class='line'>Block size=1024 (log=0)
</span><span class='line'>Fragment size=1024 (log=0)
</span><span class='line'>Stride=0 blocks, Stripe width=0 blocks
</span><span class='line'>25688 inodes, 102664 blocks
</span><span class='line'>5133 blocks (5.00%) reserved for the super user
</span><span class='line'>First data block=1
</span><span class='line'>Maximum filesystem blocks=67371008
</span><span class='line'>13 block groups
</span><span class='line'>8192 blocks per group, 8192 fragments per group
</span><span class='line'>1976 inodes per group
</span><span class='line'>Superblock backups stored on blocks: 
</span><span class='line'>  8193, 24577, 40961, 57345, 73729
</span><span class='line'>Writing inode tables: done                            
</span><span class='line'>Creating journal (4096 blocks): done
</span><span class='line'>Writing superblocks and filesystem accounting information: done
</span><span class='line'>This filesystem will be automatically checked every 23 mounts or
</span><span class='line'>180 days, whichever comes first.  Use tune2fs -c or -i to override.</span></code></pre></td></tr></table></div></figure>


<p>  3、挂载<br/>
实例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# mkdir /togogo
</span><span class='line'>[root@demo ~]# 
</span><span class='line'>[root@demo ~]# mount /dev/vda5 /togogo/
</span><span class='line'>[root@demo media]# mount | grep vda
</span><span class='line'>(ro,nosuid,nodev,uhelper=udisks,uid=0,gid=0,iocharset=utf8,mode=0400,dmode=0500)
</span><span class='line'>/dev/vda5 on /togogo type ext4 (rw)</span></code></pre></td></tr></table></div></figure>


<p>  4、修改配置文件<br/>
实例：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# cat /etc/fstab
</span><span class='line'>#
</span><span class='line'># /etc/fstab
</span><span class='line'># Created by anaconda on Sun Sep  1 09:14:16 2013
</span><span class='line'>#
</span><span class='line'># Accessible filesystems, by reference, are maintained under '/dev/disk'
</span><span class='line'># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
</span><span class='line'>#
</span><span class='line'>/dev/mapper/vgsrv-root  /                       ext4    defaults        1 1
</span><span class='line'>UUID=af186298-194c-4d01-8c3e-a21b28c45740 /boot                   ext4    defaults        1 2
</span><span class='line'>/dev/mapper/vgsrv-common /common                 ext4    defaults        1 2
</span><span class='line'>/dev/mapper/vgsrv-home  /home                   ext4    defaults        1 2
</span><span class='line'>/dev/mapper/vgsrv-shrink /shrink                 ext4    defaults        1 2
</span><span class='line'>/dev/mapper/vgsrv-swap  swap                    swap    defaults        0 0
</span><span class='line'>tmpfs                   /dev/shm                tmpfs   defaults        0 0
</span><span class='line'>devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
</span><span class='line'>sysfs                   /sys                    sysfs   defaults        0 0
</span><span class='line'>proc                    /proc                   proc    defaults        0 0
</span><span class='line'>UUID=c061f12f-efa2-4aa2-8091-de8e73549bae /data   ext4    defaults,_netdev    0 0
</span><span class='line'>/dev/vda5     /togogo         ext4    defaults    0 0</span></code></pre></td></tr></table></div></figure>


<p>mount -a 可自动挂载已写在配置文件下的分区。</p>

<h2>unit 7</h2>

<h3>创建逻辑卷</h3>

<p>逻辑卷相对于普通分区的好处是可以动态修改卷的大小，以使用卷内文件数量的变化。
&ndash; 基本流程：<br/>
fdisk 分区 &mdash;> pvcreate 创建物理卷 &mdash;> vgcreate 创建卷组 &mdash;> lvcreate 创建逻辑卷 &mdash;> mkfs 格式化 &mdash;> mount 挂载<br/>
实例：<br/>
  1、分区，修改分区ID号</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# fdisk /dev/vda
</span><span class='line'>WARNING: DOS-compatible mode is deprecated. It's strongly recommended to
</span><span class='line'>         switch off the mode (command 'c') and change display units to
</span><span class='line'>         sectors (command 'u').
</span><span class='line'>Command (m for help): n
</span><span class='line'>Command action
</span><span class='line'>   l   logical (5 or over)
</span><span class='line'>   p   primary partition (1-4)
</span><span class='line'>l
</span><span class='line'>First cylinder (21532-27046, default 21532): 
</span><span class='line'>Using default value 21532
</span><span class='line'>Last cylinder, +cylinders or +size{K,M,G} (21532-27046, default 27046): +200M
</span><span class='line'>Command (m for help): n
</span><span class='line'>Command action
</span><span class='line'>   l   logical (5 or over)
</span><span class='line'>   p   primary partition (1-4)
</span><span class='line'>l
</span><span class='line'>First cylinder (21939-27046, default 21939): 
</span><span class='line'>Using default value 21939
</span><span class='line'>Last cylinder, +cylinders or +size{K,M,G} (21939-27046, default 27046): +300M
</span><span class='line'>Command (m for help): p
</span><span class='line'>Disk /dev/vda: 14.0 GB, 13958643712 bytes
</span><span class='line'>16 heads, 63 sectors/track, 27046 cylinders
</span><span class='line'>Units = cylinders of 1008 * 512 = 516096 bytes
</span><span class='line'>Sector size (logical/physical): 512 bytes / 512 bytes
</span><span class='line'>I/O size (minimum/optimal): 512 bytes / 512 bytes
</span><span class='line'>Disk identifier: 0x00064009
</span><span class='line'>   Device Boot      Start         End      Blocks   Id  System
</span><span class='line'>/dev/vda1   *           3         523      262144   83  Linux
</span><span class='line'>Partition 1 does not end on cylinder boundary.
</span><span class='line'>/dev/vda2             523       21328    10485760   8e  Linux LVM
</span><span class='line'>Partition 2 does not end on cylinder boundary.
</span><span class='line'>/dev/vda3           21328       27046     2882256    5  Extended
</span><span class='line'>/dev/vda5           21328       21531      102664+  83  Linux
</span><span class='line'>/dev/vda6           21532       21938      205096+  83  Linux
</span><span class='line'>/dev/vda7           21939       22549      307912+  83  Linux
</span><span class='line'>Command (m for help): m
</span><span class='line'>Command action
</span><span class='line'>   a   toggle a bootable flag
</span><span class='line'>   b   edit bsd disklabel
</span><span class='line'>   c   toggle the dos compatibility flag
</span><span class='line'>   d   delete a partition
</span><span class='line'>   l   list known partition types
</span><span class='line'>   m   print this menu
</span><span class='line'>   n   add a new partition
</span><span class='line'>   o   create a new empty DOS partition table
</span><span class='line'>   p   print the partition table
</span><span class='line'>   q   quit without saving changes
</span><span class='line'>   s   create a new empty Sun disklabel
</span><span class='line'>   t   change a partition's system id
</span><span class='line'>   u   change display/entry units
</span><span class='line'>   v   verify the partition table
</span><span class='line'>   w   write table to disk and exit
</span><span class='line'>   x   extra functionality (experts only)
</span><span class='line'>Command (m for help): t
</span><span class='line'>Partition number (1-7): 6
</span><span class='line'>Hex code (type L to list codes): 8e
</span><span class='line'>Changed system type of partition 6 to 8e (Linux LVM)
</span><span class='line'>Command (m for help): t
</span><span class='line'>Partition number (1-7): 7
</span><span class='line'>Hex code (type L to list codes): 8e
</span><span class='line'>Changed system type of partition 7 to 8e (Linux LVM)
</span><span class='line'>Command (m for help): p
</span><span class='line'>Disk /dev/vda: 14.0 GB, 13958643712 bytes
</span><span class='line'>16 heads, 63 sectors/track, 27046 cylinders
</span><span class='line'>Units = cylinders of 1008 * 512 = 516096 bytes
</span><span class='line'>Sector size (logical/physical): 512 bytes / 512 bytes
</span><span class='line'>I/O size (minimum/optimal): 512 bytes / 512 bytes
</span><span class='line'>Disk identifier: 0x00064009
</span><span class='line'>   Device Boot      Start         End      Blocks   Id  System
</span><span class='line'>/dev/vda1   *           3         523      262144   83  Linux
</span><span class='line'>Partition 1 does not end on cylinder boundary.
</span><span class='line'>/dev/vda2             523       21328    10485760   8e  Linux LVM
</span><span class='line'>Partition 2 does not end on cylinder boundary.
</span><span class='line'>/dev/vda3           21328       27046     2882256    5  Extended
</span><span class='line'>/dev/vda5           21328       21531      102664+  83  Linux
</span><span class='line'>/dev/vda6           21532       21938      205096+  8e  Linux LVM
</span><span class='line'>/dev/vda7           21939       22549      307912+  8e  Linux LVM
</span><span class='line'>Command (m for help): w
</span><span class='line'>The partition table has been altered!
</span><span class='line'>Calling ioctl() to re-read partition table.
</span><span class='line'>[root@demo ~]# partx -a /dev/vda
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 1
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 2
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 3
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 5
</span><span class='line'>[root@demo ~]# 
</span><span class='line'>[root@demo ~]# partx -a /dev/vda
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 1
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 2
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 3
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 5
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 6
</span><span class='line'>BLKPG: Device or resource busy
</span><span class='line'>error adding partition 7</span></code></pre></td></tr></table></div></figure>


<p>  2、创建物理卷</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# pvcreate /dev/vda6
</span><span class='line'>  Writing physical volume data to disk "/dev/vda6"
</span><span class='line'>  Physical volume "/dev/vda6" successfully created
</span><span class='line'>[root@demo ~]# pvcreate /dev/vda7
</span><span class='line'>  Writing physical volume data to disk "/dev/vda7"
</span><span class='line'>  Physical volume "/dev/vda7" successfully created</span></code></pre></td></tr></table></div></figure>


<p>  3、创建卷组</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# vgcreate togogovg /dev/vda6 /dev/vda7
</span><span class='line'>  Volume group "togogovg" successfully created
</span><span class='line'>[root@demo ~]# vgdisplay togogovg
</span><span class='line'>  --- Volume group ---
</span><span class='line'>  VG Name               togogovg
</span><span class='line'>  System ID             
</span><span class='line'>  Format                lvm2
</span><span class='line'>  Metadata Areas        2
</span><span class='line'>  Metadata Sequence No  1
</span><span class='line'>  VG Access             read/write
</span><span class='line'>  VG Status             resizable
</span><span class='line'>  MAX LV                0
</span><span class='line'>  Cur LV                0
</span><span class='line'>  Open LV               0
</span><span class='line'>  Max PV                0
</span><span class='line'>  Cur PV                2
</span><span class='line'>  Act PV                2
</span><span class='line'>  VG Size               492.00 MiB
</span><span class='line'>  PE Size               4.00 MiB
</span><span class='line'>  Total PE              123
</span><span class='line'>  Alloc PE / Size       0 / 0   
</span><span class='line'>  Free  PE / Size       123 / 492.00 MiB
</span><span class='line'>  VG UUID               fd7wDW-R1Ov-8oQh-iyvN-tBur-RMoG-VcYQ5d</span></code></pre></td></tr></table></div></figure>


<p>4、创建逻辑卷</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# lvcreate -n lv01 -L 150M togogovg
</span><span class='line'>  Rounding up size to full physical extent 152.00 MiB
</span><span class='line'>  Logical volume "lv01" created</span></code></pre></td></tr></table></div></figure>


<p>5、格式化</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# mkfs -t ext4 /dev/mapper/togogovg-lv01
</span><span class='line'>mke2fs 1.41.12 (17-May-2010)
</span><span class='line'>Filesystem label=
</span><span class='line'>OS type: Linux
</span><span class='line'>Block size=1024 (log=0)
</span><span class='line'>Fragment size=1024 (log=0)
</span><span class='line'>Stride=0 blocks, Stripe width=0 blocks
</span><span class='line'>38912 inodes, 155648 blocks
</span><span class='line'>7782 blocks (5.00%) reserved for the super user
</span><span class='line'>First data block=1
</span><span class='line'>Maximum filesystem blocks=67371008
</span><span class='line'>19 block groups
</span><span class='line'>8192 blocks per group, 8192 fragments per group
</span><span class='line'>2048 inodes per group
</span><span class='line'>Superblock backups stored on blocks: 
</span><span class='line'>  8193, 24577, 40961, 57345, 73729
</span><span class='line'>Writing inode tables: done                            
</span><span class='line'>Creating journal (4096 blocks): done
</span><span class='line'>Writing superblocks and filesystem accounting information: done
</span><span class='line'>This filesystem will be automatically checked every 20 mounts or
</span><span class='line'>180 days, whichever comes first.  Use tune2fs -c or -i to override.</span></code></pre></td></tr></table></div></figure>


<p>6、挂载</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# mkdir /lv01
</span><span class='line'>[root@demo ~]# blkid /dev/mapper/togogovg-lv01 
</span><span class='line'>/dev/mapper/togogovg-lv01: UUID="2460a9a1-f1ea-4aae-95ea-c39762380480" TYPE="ext4" 
</span><span class='line'>[root@demo ~]# cat /etc/fstab
</span><span class='line'>#
</span><span class='line'># /etc/fstab
</span><span class='line'># Created by anaconda on Sun Sep  1 09:14:16 2013
</span><span class='line'>#
</span><span class='line'># Accessible filesystems, by reference, are maintained under '/dev/disk'
</span><span class='line'># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
</span><span class='line'>#
</span><span class='line'>/dev/mapper/vgsrv-root  /                       ext4    defaults        1 1
</span><span class='line'>UUID=af186298-194c-4d01-8c3e-a21b28c45740 /boot                   ext4    defaults        1 2
</span><span class='line'>/dev/mapper/vgsrv-common /common                 ext4    defaults        1 2
</span><span class='line'>/dev/mapper/vgsrv-home  /home                   ext4    defaults        1 2
</span><span class='line'>/dev/mapper/vgsrv-shrink /shrink                 ext4    defaults        1 2
</span><span class='line'>/dev/mapper/vgsrv-swap  swap                    swap    defaults        0 0
</span><span class='line'>tmpfs                   /dev/shm                tmpfs   defaults        0 0
</span><span class='line'>devpts                  /dev/pts                devpts  gid=5,mode=620  0 0
</span><span class='line'>sysfs                   /sys                    sysfs   defaults        0 0
</span><span class='line'>proc                    /proc                   proc    defaults        0 0
</span><span class='line'>UUID=c061f12f-efa2-4aa2-8091-de8e73549bae /data   ext4    defaults,_netdev    0 0
</span><span class='line'>/dev/vda5     /togogo         ext4    defaults    0 0
</span><span class='line'>UUID=2460a9a1-f1ea-4aae-95ea-c39762380480 /lv01   ext4    defaults    0 0
</span><span class='line'>[root@demo ~]# mount
</span><span class='line'>/dev/mapper/vgsrv-root on / type ext4 (rw)
</span><span class='line'>proc on /proc type proc (rw)
</span><span class='line'>sysfs on /sys type sysfs (rw)
</span><span class='line'>devpts on /dev/pts type devpts (rw,gid=5,mode=620)
</span><span class='line'>tmpfs on /dev/shm type tmpfs (rw,rootcontext="system_u:object_r:tmpfs_t:s0")
</span><span class='line'>/dev/vda1 on /boot type ext4 (rw)
</span><span class='line'>/dev/mapper/vgsrv-common on /common type ext4 (rw)
</span><span class='line'>/dev/mapper/vgsrv-home on /home type ext4 (rw)
</span><span class='line'>/dev/mapper/vgsrv-shrink on /shrink type ext4 (rw)
</span><span class='line'>none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)
</span><span class='line'>sunrpc on /var/lib/nfs/rpc_pipefs type rpc_pipefs (rw)
</span><span class='line'>/dev/vda5 on /togogo type ext4 (rw)
</span><span class='line'>/dev/mapper/togogovg-lv01 on /lv01 type ext4 (rw)</span></code></pre></td></tr></table></div></figure>


<ul>
<li>扫描，查看物理卷，卷组，逻辑卷信息：<br/>
pvscan,pvdisplay<br/>
vgscan,vgdisplay<br/>
lvscan,lvdisplay<br/>
实例：</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# vgscan
</span><span class='line'>  Reading all physical volumes.  This may take a while...
</span><span class='line'>  Found volume group "togogovg" using metadata type lvm2
</span><span class='line'>  Found volume group "vgsrv" using metadata type lvm2
</span><span class='line'>[root@demo ~]# 
</span><span class='line'>[root@demo ~]# pvscan
</span><span class='line'>  PV /dev/vda6   VG togogovg   lvm2 [196.00 MiB / 44.00 MiB free]
</span><span class='line'>  PV /dev/vda7   VG togogovg   lvm2 [296.00 MiB / 296.00 MiB free]
</span><span class='line'>  PV /dev/vda2   VG vgsrv      lvm2 [9.97 GiB / 4.75 GiB free]
</span><span class='line'>  Total: 3 [10.45 GiB] / in use: 3 [10.45 GiB] / in no VG: 0 [0   ]
</span><span class='line'>[root@demo ~]# pvdisplay /dev/vda6
</span><span class='line'>  --- Physical volume ---
</span><span class='line'>  PV Name               /dev/vda6
</span><span class='line'>  VG Name               togogovg
</span><span class='line'>  PV Size               200.29 MiB / not usable 4.29 MiB
</span><span class='line'>  Allocatable           yes 
</span><span class='line'>  PE Size               4.00 MiB
</span><span class='line'>  Total PE              49
</span><span class='line'>  Free PE               11
</span><span class='line'>  Allocated PE          38
</span><span class='line'>  PV UUID               pjxkza-zEAg-3JF6-G7Gg-1oju-xcuZ-bJdF5x
</span><span class='line'>[root@demo ~]# vgdisplay togogovg
</span><span class='line'>  --- Volume group ---
</span><span class='line'>  VG Name               togogovg
</span><span class='line'>  System ID             
</span><span class='line'>  Format                lvm2
</span><span class='line'>  Metadata Areas        2
</span><span class='line'>  Metadata Sequence No  2
</span><span class='line'>  VG Access             read/write
</span><span class='line'>  VG Status             resizable
</span><span class='line'>  MAX LV                0
</span><span class='line'>  Cur LV                1
</span><span class='line'>  Open LV               1
</span><span class='line'>  Max PV                0
</span><span class='line'>  Cur PV                2
</span><span class='line'>  Act PV                2
</span><span class='line'>  VG Size               492.00 MiB
</span><span class='line'>  PE Size               4.00 MiB
</span><span class='line'>  Total PE              123
</span><span class='line'>  Alloc PE / Size       38 / 152.00 MiB
</span><span class='line'>  Free  PE / Size       85 / 340.00 MiB
</span><span class='line'>  VG UUID               fd7wDW-R1Ov-8oQh-iyvN-tBur-RMoG-VcYQ5d
</span><span class='line'>[root@demo ~]# lvdisplay /dev/mapper/togogovg-lv01 
</span><span class='line'>  --- Logical volume ---
</span><span class='line'>  LV Path                /dev/togogovg/lv01
</span><span class='line'>  LV Name                lv01
</span><span class='line'>  VG Name                togogovg
</span><span class='line'>  LV UUID                BMsz8a-ye5Q-77oH-rm5y-O3I6-moKB-YeOXmP
</span><span class='line'>  LV Write Access        read/write
</span><span class='line'>  LV Creation host, time demo.example.com, 2013-09-15 14:56:43 -0400
</span><span class='line'>  LV Status              available
</span><span class='line'>  # open                 1
</span><span class='line'>  LV Size                152.00 MiB
</span><span class='line'>  Current LE             38
</span><span class='line'>  Segments               1
</span><span class='line'>  Allocation             inherit
</span><span class='line'>  Read ahead sectors     auto
</span><span class='line'>  - currently set to     256
</span><span class='line'>  Block device           253:5</span></code></pre></td></tr></table></div></figure>


<h3>扩展逻辑卷</h3>

<ul>
<li>一般流程：<br/>
新建一个物理卷&mdash;>将物理卷加入卷组&mdash;>扩展逻辑卷<br/>
实例：<br/>
1、创建物理卷（略）<br/>
2、扩展卷组</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# vgextend togogovg /dev/vda8
</span><span class='line'>  Volume group "togogovg" successfully extended
</span><span class='line'>[root@demo ~]# vgdisplay togogovg
</span><span class='line'>    
</span><span class='line'>  VG Name               togogovg
</span><span class='line'>  System ID             
</span><span class='line'>  Format                lvm2
</span><span class='line'>  Metadata Areas        3
</span><span class='line'>  Metadata Sequence No  3
</span><span class='line'>  VG Access             read/write
</span><span class='line'>  VG Status             resizable
</span><span class='line'>  MAX LV                0
</span><span class='line'>  Cur LV                1
</span><span class='line'>  Open LV               1
</span><span class='line'>  Max PV                0
</span><span class='line'>  Cur PV                3
</span><span class='line'>  Act PV                3
</span><span class='line'>  VG Size               788.00 MiB
</span><span class='line'>  PE Size               4.00 MiB
</span><span class='line'>  Total PE              197
</span><span class='line'>  Alloc PE / Size       38 / 152.00 MiB
</span><span class='line'>  Free  PE / Size       159 / 636.00 MiB
</span><span class='line'>  VG UUID               fd7wDW-R1Ov-8oQh-iyvN-tBur-RMoG-VcYQ5d</span></code></pre></td></tr></table></div></figure>


<p>3、扩展逻辑卷</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[root@demo ~]# lvextend -L +148M /dev/mapper/togogovg-lv01 
</span><span class='line'>  Extending logical volume lv01 to 300.00 MiB
</span><span class='line'>  Logical volume lv01 successfully resized
</span><span class='line'>[root@demo ~]# lvdisplay /dev/mapper/togogovg-lv01
</span><span class='line'>  --- Logical volume ---
</span><span class='line'>  LV Path                /dev/togogovg/lv01
</span><span class='line'>  LV Name                lv01
</span><span class='line'>  VG Name                togogovg
</span><span class='line'>  LV UUID                BMsz8a-ye5Q-77oH-rm5y-O3I6-moKB-YeOXmP
</span><span class='line'>  LV Write Access        read/write
</span><span class='line'>  LV Creation host, time demo.example.com, 2013-09-15 14:56:43 -0400
</span><span class='line'>  LV Status              available
</span><span class='line'>  # open                 1
</span><span class='line'>  LV Size                300.00 MiB
</span><span class='line'>  Current LE             75
</span><span class='line'>  Segments               2
</span><span class='line'>  Allocation             inherit
</span><span class='line'>  Read ahead sectors     auto
</span><span class='line'>  - currently set to     256
</span><span class='line'>  Block device           253:5
</span><span class='line'>[root@demo ~]# df -h
</span><span class='line'>Filesystem            Size  Used Avail Use% Mounted on
</span><span class='line'>/dev/mapper/vgsrv-root 4.0G  2.6G  1.3G  68% /
</span><span class='line'>tmpfs                 499M   88K  499M   1% /dev/shm
</span><span class='line'>/dev/vda1             248M   33M  203M  14% /boot
</span><span class='line'>/dev/mapper/vgsrv-common 124M  5.6M  113M   5% /common
</span><span class='line'>/dev/mapper/vgsrv-home 248M   46M  191M  20% /home
</span><span class='line'>/dev/mapper/vgsrv-shrink 310M   11M  284M   4% /shrink
</span><span class='line'>/dev/vda5              98M  5.6M   87M   6% /togogo
</span><span class='line'>/dev/mapper/togogovg-lv01 148M  5.6M  135M   4% /lv01
</span><span class='line'>[root@demo ~]# resize2fs /dev/mapper/togogovg-lv01 
</span><span class='line'>resize2fs 1.41.12 (17-May-2010)
</span><span class='line'>Filesystem at /dev/mapper/togogovg-lv01 is mounted on /lv01; on-line resizing required
</span><span class='line'>old desc_blocks = 1, new_desc_blocks = 2
</span><span class='line'>Performing an on-line resize of /dev/mapper/togogovg-lv01 to 307200 (1k) blocks.
</span><span class='line'>The filesystem on /dev/mapper/togogovg-lv01 is now 307200 blocks long.
</span><span class='line'>[root@demo ~]# df -h
</span><span class='line'>Filesystem            Size  Used Avail Use% Mounted on
</span><span class='line'>/dev/mapper/vgsrv-root 4.0G  2.6G  1.3G  68% /
</span><span class='line'>tmpfs                 499M   88K  499M   1% /dev/shm
</span><span class='line'>/dev/vda1             248M   33M  203M  14% /boot
</span><span class='line'>/dev/mapper/vgsrv-common 124M  5.6M  113M   5% /common
</span><span class='line'>/dev/mapper/vgsrv-home 248M   46M  191M  20% /home
</span><span class='line'>/dev/mapper/vgsrv-shrink 310M   11M  284M   4% /shrink
</span><span class='line'>/dev/vda5              98M  5.6M   87M   6% /togogo
</span><span class='line'>/dev/mapper/togogovg-lv01  291M  6.1M  270M   3% /lv01
</span><span class='line'>[root@demo ~]# pvscan
</span><span class='line'>  PV /dev/vda6   VG togogovg   lvm2 [196.00 MiB / 0    free]
</span><span class='line'>  PV /dev/vda7   VG togogovg   lvm2 [296.00 MiB / 192.00 MiB free]
</span><span class='line'>  PV /dev/vda8   VG togogovg   lvm2 [296.00 MiB / 296.00 MiB free]
</span><span class='line'>  PV /dev/vda2   VG vgsrv      lvm2 [9.97 GiB / 4.75 GiB free]
</span><span class='line'>  Total: 4 [10.74 GiB] / in use: 4 [10.74 GiB] / in no VG: 0 [0   ]</span></code></pre></td></tr></table></div></figure>



</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Grunmin</span></span>

      








  


<time datetime="2013-11-03T02:07:00+08:00" pubdate data-updated="true">Nov 3<span>rd</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/linux/'>linux</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://grunmin.github.io/blog/2013/11/03/rhce-note-1/" data-via="" data-counturl="http://grunmin.github.io/blog/2013/11/03/rhce-note-1/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/08/05/guan-yu-zhi-dao-bu-zhi-dao-de-ji-dian-li-jie/" title="Previous Post: 关于知道不知道的几点理解">&laquo; 关于知道不知道的几点理解</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/11/03/rhce-note-9/" title="Next Post: RHCE note 9">RHCE note 9 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Tags</h1>
  <ul class="tag-cloud">
    <a style="font-size: 210%" href="/tags/linux/">linux</a>
<a style="font-size: 90%" href="/tags/octopress/">octopress</a>
<a style="font-size: 142%" href="/tags/rhce/">rhce</a>
<a style="font-size: 90%" href="/tags/wiznote/">wiznote</a>
<a style="font-size: 90%" href="/tags/zend/">zend</a>
<a style="font-size: 142%" href="/tags/sui-xiang/">随想</a>

  </ul>
</section>
<section>
  <h1>分类目录</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/thinking/'>Thinking (2)</a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (6)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (1)</a></li>

  </ul>
</section>
<section>
  <h1>近期文章</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/11/15/yan-gong-da-tie-ji/">广工打铁记</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/04/octopressda-jian-he-ge-xing-hua-pei-zhi/">Octopress博客搭建和个性化配置</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/03/rhce-note-9/">RHCE Note 9</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/03/rhce-note-1/">RHCE Note 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/05/guan-yu-zhi-dao-bu-zhi-dao-de-ji-dian-li-jie/">关于知道不知道的几点理解</a>
      </li>
    
  </ul>
</section>




<section>
  <h1>About Me</h1>
  <li>
  <p>南中国一般大学大光电学子</p>
  </li>
  <li>
  <p>linux 爱好者</p>
  </li>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Grunmin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'grunmin';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://grunmin.github.io/blog/2013/11/03/rhce-note-1/';
        var disqus_url = 'http://grunmin.github.io/blog/2013/11/03/rhce-note-1/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
