<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: octopress | 郭润民的博客]]></title>
  <link href="http://grunmin.github.io/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://grunmin.github.io/"/>
  <updated>2013-12-22T00:24:06+08:00</updated>
  <id>http://grunmin.github.io/</id>
  <author>
    <name><![CDATA[Grunmin]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[用马克飞象写博客]]></title>
    <link href="http://grunmin.github.io/blog/2013/11/23/yong-ma-ke-fei-xiang-xie-bo-ke/"/>
    <updated>2013-11-23T15:46:00+08:00</updated>
    <id>http://grunmin.github.io/blog/2013/11/23/yong-ma-ke-fei-xiang-xie-bo-ke</id>
    <content type="html"><![CDATA[<p>用octopress搭建博客之后，大爱markdown的简约，因此我对云笔记的要求又多了一项：支持markdown格式编辑和保存。</p>

<p>我之前尝试用过一些云笔记产品，比如印象笔记，为之笔记，有道云笔记等。印象笔记的网页版很好，但是linux下没有官方的客户端（这意味着不能离线查看笔记）。为之笔记我一直在用着，因为它有linux客户端，但它的是网页版很糟糕，而且最近出现了网页版加载不了笔记的情况，因此有换个笔记的想法。有道云就不提了，目前没发现什么优势。</p>

<!-- more -->


<p>在写octopress博客的时候，我先在为之笔记上写好txt格式的正文，将其复制到stackedit上进行markdown处理，再将转化后的内容写进octopress的文件中。这样，在为之笔记上的博客内容就和octopress上的不同了，而且，笔记上无格式的正文也十分难看。</p>

<p>今天在chrome商店上看到了一个应用，据称是专为印象笔记打造的markdown编辑器，叫马克飞象。这是图标<br/>
<img src="https://lh5.googleusercontent.com/-hOEvL1TOB-o/UpBepDGUAhI/AAAAAAAAAGY/WHZ5qubwNeE/s0/2013-11-23-151125_118x133_scrot.png" title="2013-11-23-151125_118x133_scrot.png" alt="enter image description here" /></p>

<p>绑定笔记帐号后在上面编辑可以实时查看效果，并将处理后的笔记保存到印象笔记中。效果如图：
<img src="https://lh6.googleusercontent.com/-N6XlKlK81F8/UpBe4QtcpWI/AAAAAAAAAGk/GtCzYl-__PY/s0/2013-11-23-153122_422x354_scrot.png" title="2013-11-23-153122_422x354_scrot.png" alt="enter image description here" /></p>

<p>用马克飞象编辑的文章保存到笔记中是markdown解释过的语言（笔记不会显示源代码），这样保存下来的笔记比无格式或者markdown源代码格式的好看多了。  相对于stackedit与谷歌云端硬盘的优势也是十分明显的，它可以直接在印象笔记中查看。</p>

<p>马克飞象支持将所编辑的笔记分类和加标签，使用<code>@(categories)[tags|tags]</code>即可，同一文章中只能出现一次，且必须与其他内容隔一些距离。</p>

<p>用马克飞象编辑的笔记在右上角会显示一个链接，点击链接后会用启用马克飞象编辑文章，因此不用担心后续更新的问题。</p>

<p><img src="https://lh6.googleusercontent.com/-aipDbqSYjS0/UpBe_0jaxzI/AAAAAAAAAGw/giigXjHPP2A/s0/2013-11-23-153132_937x329_scrot.png" title="2013-11-23-153132_937x329_scrot.png" alt="enter image description here" /></p>

<p>我是用马克飞象编辑的这篇博客，在编辑过程中也发现了一些问题。问题有三：</p>

<ul>
<li>插入的图片不能显示<br/>
编辑时插入图片不能显示，保存到印象笔记后也是如此。</li>
<li>编辑器的光标显示位置不准确<br/>
这是个更大的问题，光标显示所在的位置不是其真实位置，在添删个别文字时特别麻烦。</li>
<li>跟其他编辑有部分不兼容(比如stackedit)</li>
</ul>


<p>总体来说马克飞象还是十分实用的，特别是对程序员，用马克飞象记录代码显得如虎添翼。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[octopress博客搭建和个性化配置]]></title>
    <link href="http://grunmin.github.io/blog/2013/11/04/octopressda-jian-he-ge-xing-hua-pei-zhi/"/>
    <updated>2013-11-04T15:02:00+08:00</updated>
    <id>http://grunmin.github.io/blog/2013/11/04/octopressda-jian-he-ge-xing-hua-pei-zhi</id>
    <content type="html"><![CDATA[<p>使用octopress搭建博客的人，大概都会喜欢写关于如何搭建配置octopress的文章。因为它的高定制性，为极客们带来很多乐趣。从首页的配置，到分类，评论，个人信息，社会化分享等的配置，内容繁多。而且这是我第二次搭建octopress环境了，发现上一次的配置有一部分不能clone到本机上。因此，把配置的过程记录下来是十分有必要的。<br/>
我的意愿是记录配置的过程，顺便整理大牛们关于这方面的一些说明。网络上相关资料有很多，没有实践过的没有摘录在这里。所有的代码实现都是直接引用前辈们的。另外，本博的配置环境是linux fedora 18.</p>

<!-- more -->


<h4><a href="http://octopress.org/">octopress官方网站</a></h4>

<p>octopress的配置都可以在官网上找到。事实上，遇到问题查询官网文档是最有效率的方法。</p>

<h3>github的设置</h3>

<h4>创建仓库</h4>

<p>登陆github网站，注册一个用户，假设为grunmin。<br/>
创建一个仓库，命名为username.github.com，例如<code>grunmin.github.com</code></p>

<h4>使用密钥登陆github</h4>

<p><code>
[[ -f ~/.ssh/id_rsa.pub ]] || ssh-keygen -t rsa     #生成密钥对
</code>
按默认一直确认即可。<br/>
在github帐号设置里找到ssh的设置，添加一个ssh key。<br/>
进入~/.ssh/找到id_rsa.pub文件，把里面的内容填到key里，title不填。<br/>
这样做的好处是之后push到仓库上时可以不用输入密码。</p>

<h3>安装ruby</h3>

<p>查看ruby版本<br/>
<code>
ruby --version  # 必须显示1.9.3
</code>
安装方法：
<code>
curl -L https://get.rvm.io | bash -s stable --ruby
rvm install 1.9.3
rvm use 1.9.3
rvm rubygems latest
</code>
若有显示命名未找到，直接下载安装即可。</p>

<h3>安装octopress</h3>

<p>在安装octopress之前，确保已安装git。
<code>
git clone git://github.com/imathis/octopress.git octopress
cd octopress
gem install bundler
bundle install
rake install
</code>
这里容易出现三个问题：<br/>
1、已安装rvm和bundler，但显示找不到命令。</p>

<p>用绝对路径：<code>/home/username/.rvm/bin/rvm</code>
<code>/home/username/.rvm/bin/bundler</code><br/>
2、执行bundler install时显示：GemfileNotFound error?</p>

<p>可能在安装的过程中退出了octopress目录，进入后执行即可。<br/>
3、执行rake install时显示<br/>
<code>
rake aborted!
No Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb)
</code>
同理，进入安装目录即可。</p>

<h3>将博客部署到github上</h3>

<p><code>
rake setup_github_pages
</code>
此时会要求输入仓库的url，可以在github仓库内容业的右下角找到。<br/>
例如我的是<code>git@github.com:grunmin/grunmin.github.com.git</code><br/>
成功后即可用
<code>
rake new_post["title"]
</code>
生成新文章，文章在source/_post/目录下，文件名构成为时间和标题的拼音。之后执行<br/>
<code>
rake generate
rake preview   
</code>
此时可以预览(浏览器打开localhost:4000可看到效果。）如果没有问题，则执行
<code>
rake deploy
git add .
git comment -m "comment"
git push origin source
</code>
保存到仓库。<br/>
需要注意的是执行git命令时应处于octopress目录，并且checkout到source分支，
<code>
cd octopress
git checkout source
git add .
git commit -m "comment"
git push origin souce
</code></p>

<h3>octopress博客的个性化配置</h3>

<h4>添加文章分类（category)</h4>

<p>1、增加category_list插件<br/>
将下面的代码写到<code>plugins/category_list_tag.rb</code>
```
module Jekyll
  class CategoryListTag &lt; Liquid::Tag</p>

<pre><code>def render(context)
  html = ""
  categories = context.registers[:site].categories.keys
  categories.sort.each do |category|
    posts_in_category = context.registers[:site].categories[category].size
    category_dir = context.registers[:site].config['category_dir']
    category_url = File.join(category_dir, category.gsub(/_|\P{Word}/, '-').gsub(/-{2,}/, '-').downcase)
    html &lt;&lt; "&lt;li class='category'&gt;&lt;a href='http://grunmin.github.io/#{category_url}/'&gt;#{category} (#{posts_in_category})&lt;/a&gt;&lt;/li&gt;\n"
  end
  html
end
</code></pre>

<p>  end
end</p>

<p>Liquid::Template.register_tag(&lsquo;category_list&rsquo;, Jekyll::CategoryListTag)
```</p>

<p>2、增加侧边栏<br/>
将下面的代码写到<code>source/_includes/asides/category_list.html</code>
```
<section>
  <h1>Categories</h1>
  <ul id="categories"></p>

<pre><code>{% category_list %} 
</code></pre>

<p>  </ul>
</section>
```</p>

<p>修改_config.yml文件，找到<code>default_asides:</code><br/>
在中括号内添加
<code>asides/category_list.html</code></p>

<p>添加的位置决定在页面显示的位置，注意用逗号隔开。<br/>
用vim编辑器粘贴的话可能会自动缩进，启用粘贴模式或用其他编辑器即可。</p>

<h4>添加社会化评论</h4>

<p>octopress 产生静态网页，不支持评论功能，所以我们用第三方评论系统。好消息是octopress已为我们配置好了Disqus，我们只需要稍微填写以下信息即可。<br/>
1、首先在<a href="http://www.disqus.com/">Disqus</a> 注册一个帐号，点击添加到我的网页，添加站点信息，比如我的<code>grunmin.github.io</code><br/>
2、修改_config.yml文件，找到这一段：
```</p>

<h1>Disqus Comments</h1>

<p>disqus_short_name:
disqus_show_comment_count: false
```
添加你的disqus用户名，并把false修改成true即可。注意冒号后面有空格。<br/>
此外，可以用国内的多说系统，速度较快，且比较符合景德镇村民的需要。之前我用的就是这个，但是没有记录配置过程，这次克隆时多说系统没有成功启动，因此不折腾了，有需要的话可以自行谷歌。</p>

<h4>导航栏设置</h4>

<p>导航栏的设置在<code>source\_includes\custom\navigation.html</code><br/>
我们可以将Blog和Archives修改为首页和归档，也可以在此添加一个标签页，此时应使用命令<code>rake new_page['about']</code>创建一个页面，页面路径为<code>source\about\index.markdown</code>;<br/>
修改后的文件如下：
```</p>

<ul class="main-navigation"> 
  <li><a href="/">首页</a></li> 
  <li><a href="/blog/archives">归档</a></li> 
  <li><a href="/about">关于</a></li> 
</ul>


<p>```</p>

<h3>从新电脑上恢复博客内容：</h3>

<p>如果电脑重装了系统，或者要在另一台电脑编写博客，可以这样设置。
找到博客仓库的url，执行
<code>
git clone -b source (url) octopress   #把source 克隆到本地octopress目录上
</code>
<code>
cd octopress
git clone (url) _deploy   #克隆master分支，它存放着博客内容。
</code>
<code>
gem install bundler
bundle install
rake install
rake setup_github_pages
</code>
之后操作同上，有问题照葫芦画瓢。</p>

<h3>其他问题</h3>

<p>如果不能生成或者推送博客了，可以采取下述措施：</p>

<ul>
<li>在命令行输入<code>/bin/bash --login</code>，重试</li>
<li>查看ruby的版本，如果不是1.9.3的话，执行<code>rvm use 1.9.3</code></li>
</ul>


<p><strong>持续更新…………</strong></p>

<h4>参考文章：</h4>

<p><a href="http://beyondvincent.com/blog/2013/08/03/108-creating-a-github-blog-using-octopress/">利用Octopress搭建一个Github博客</a></p>

<p><a href="http://www.yangzhiping.com/tech/octopress.html">Ruby开源项目介绍(1)：octopress——像黑客一样写博客</a></p>

<p><a href="http://codemacro.com/2012/07/18/add-category-list-to-octopress/">为octopress添加分类(category)列表</a></p>

<p><a href="http://www.cnblogs.com/oec2003/archive/2013/05/31/3109577.html">冯威的学习专栏&mdash;-记录工作学习点滴</a></p>
]]></content>
  </entry>
  
</feed>
